---
title: interview 
tags:interview,essay
grammar_cjkRuby: true
---


## 反向代理是什么，有什么作用
### 使用代理的作用
#### 提高访问速度 
由于目标主机返回的数据会存放在代理服务器的硬盘中，因此下一次客户再访问相同的站点数据时，会直接从代理服务器的硬盘中读取，起到了缓存的作用，尤其对于热门网站能明显提高访问速度。

#### 防火墙作用 
由于所有的客户机请求都必须通过代理服务器访问远程站点，因此可以在代理服务器上设限，过滤掉某些不安全信息。同时正向代理中上网者可以隐藏自己的IP,免受攻击。

#### 突破访问限制 
互联网上有许多开发的代理服务器，客户机在访问受限时，可通过不受限的代理服务器访问目标站点，通俗说，我们使用的翻墙浏览器就是利用了代理服务器，可以直接访问外网。

 ### 正向代理
 &emsp;&emsp;我们可以先从正向代理入手，正向代理一般用来作为对访问不到的资源的代理，我们知道从谁那得到的资源，但是资源处不知道具体是谁得到。

![Diagram](./attachments/1539759743844.drawio.html)

&emsp;&emsp;就想A向B借钱，但是B没有钱，于是B就向C借钱，然后把借来的钱给A，A并不知道这是B从C那借来的钱。

&emsp;&emsp; 正向代理（forward proxy） ，一个位于客户端和原始服务器之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并制定目标（原始服务器），然后代理向原始服务器转发请求并将获得的内容返回给客户端，客户端才能使用正向代理。我们平时说的代理就是指正向代理。

### 反向代理

&emsp;&emsp; 反向代理（Reverse Proxy），以`代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，`并将从服务器上得到的结果返回给internet上请求的客户端，此时代理服务器对外表现为一个反向代理服务器。 
&emsp;&emsp; 理解起来有些抽象，可以这么说：A向B借钱，B没有拿自己的钱，而是悄悄地向C借钱，拿到钱之后再交给A,A以为是B的钱，他并不知道C的存在。 

![Diagram](./attachments/1539760221643.drawio.html)

### 正向代理和反向代理的区别； 

 - 位置不同 
 正向代理，架设在客户机和目标主机之间； 
 反向代理，架设在服务器端；
 - 代理对象不同 
正向代理，代理客户端，服务端不知道实际发起请求的客户端； 
反向代理，代理服务端，客户端不知道实际提供服务的服务端； 

![Diagram](./attachments/1539760796389.drawio.html)

&emsp;&emsp; 备注：正向代理–HTTP代理为多个人提供翻墙服务；反向代理–百度外卖为多个商户提供平台给某个用户提供外卖服务。
- 用途不同 
正向代理，为在防火墙内的局域网客户端提供访问Internet的途径； 
反向代理，将防火墙后面的服务器提供给Internet访问；
- 安全性不同 
正向代理允许客户端通过它访问任意网站并且隐藏客户端自身，因此必须采取安全措施以确保仅为授权的客户端提供服务； 
反向代理对外都是透明的，访问者并不知道自己访问的是哪一个代理。

 - 正向代理的应用
    1. 访问原来无法访问的资源 
    2. 用作缓存，加速访问速度 
    3. 对客户端访问授权，上网进行认证 
    4. 代理可以记录用户访问记录（上网行为管理），对外隐藏用户信息

 - 反向代理的应用
    1. 保护内网安全 
    2. 负载均衡 
    3. 缓存，减少服务器的压力 
       Nginx作为最近较火的反向代理服务器，安装在目的主机端，主要用于转发客户机请求，后台有多个http服务器提供服务，nginx的功能就是把请求转发给后台的服务器，决定哪台目标主机来处理当前请求。

## 总结
&emsp;&emsp;正向代理是从客户端的角度出发，服务于特定用户（比如说一个局域网内的客户）以访问非特定的服务；反向代理正好与此相反，从服务端的角度出发，服务于非特定用户（通常是所有用户），已访问特定的服务。 

## nginx的作用，以及实现负载均衡[更深层次的理解](https://blog.csdn.net/duxingxia356/article/details/49820013)

&emsp;&emsp; Nginx是一个轻量级、高性能、稳定性高、并发性好的HTTP和反向代理服务器，应用很广泛。

### 主要作用

#### 反向代理          
&emsp;&emsp; 是用来代理服务器的，代理我们要访问的目标服务器。代理服务器接受请求，然后将请求转发给内部网络的服务器(集群化)，并将从服务器上得到的结果返回给客户端，此时代理服务器对外就表现为一个服务器。

#### 负载均衡

&emsp;&emsp; 多在高并发情况下需要使用。其原理就是将数据流量分摊到多个服务器执行，减轻每台服务器的压力，多台服务器(集群)共同完成工作任务，从而提高了数据的吞吐量。
&emsp;&emsp; Nginx可使用的负载均衡策略有：轮询（默认）、权重、ip_hash、url_hash(第三方)、fair(第三方)

#### 动静分离
&emsp;&emsp; Nginx提供的动静分离是指把动态请求和静态请求分离开，合适的服务器处理相应的请求，使整个服务器系统的性能、效率更高。
&emsp;&emsp; Nginx可以根据配置对不同的请求做不同转发，这是动态分离的基础。静态请求对应的静态资源可以直接放在Nginx上做缓冲，更好的做法是放在相应的缓冲服务器上。动态请求由相应的后端服务器处理。


## try catch的执行顺序
try{//正常执行的代码}catch (Exception e){//出错后执行的代码}finally{//无论正常执行还是出错,之后都会执行的代码}//跟上面try catch无关的代码正常执行的代码如果出现异常,就不会执行出现异常语句后面的所有正常代码。异常可能会被捕获掉,比如上面catch声明的是捕获Exception,那么所有Exception包括子类都会被捕获,但如Error或者是Throwable但又不是Exception(Exception继承Throwable)就不会被捕获。如果异常被捕获,就会执行catch里面的代码.如果异常没有被捕获,就会往外抛出,相当于这整个方法出现了异常。finally中的代码只要执行进了try catch永远都会被执行.执行完finally中的代码,如果异常被捕获就会执行外面跟这个try catch无关的代码.否则就会继续往外抛出异常。
return无论在哪里,只要执行到就会返回,但唯一一点不同的是如果return在try或者catch中,即使返回了,最终finally中的代码都会被执行.这种情况最常用的是打开了某些资源后必须关闭,比如打开了一个OutputStream,那就应该在finally中关闭,这样无论有没有出现异常,都会被关闭。

---------------------

本文来自 L_D_Y_K 的CSDN 博客 ，全文地址请点击：https://blog.csdn.net/L_D_Y_K/article/details/78166356?utm_source=copy 