---
title: 随笔记 
tags: 新建,模板,小书匠
grammar_cjkRuby: true
---


车辆状态变更 回头直接找 基础的人核对嘛。
原状态值：待用(1),在用(2),已停用(3),已报废(4),已转让(5),待确认(6),已归还(7),已删除(8)
变更动作：确认(1) 停用(3),转让(4),报废(5)
  车辆刚录入保存时 1、待确认。
        1、  如果原车辆状态为 待确认。 只能选择变更为确认。（流程结束后变更为 待用。）
         
         2、如果车辆原状态为    待用。              只能选择变更为 停用。转让、报废  【已报废、已停用、已转让】

        3、车辆（已报废、已停用、已转让、已删除） 不允许发起 状态变更变更流程
		在用、已归还、 不能选择待用
````
function carStatusChange() {
    var rowIndexs = getGridSelectedRowIndxs();
    if (rowIndexs.length > 1) {
        $.simpleAlert("请勿多选");
    } else {
      if($[CAR_STATUS]=3||$[CAR_STATUS]=4||$[CAR_STATUS]=5){
	  		 $.simpleAlert("此车辆不能发起变更流程");
	  }
        var boId = $[_ID];
        var sid = $("#sid").val();
        awsui.ajax.request({

            url: "./jd",
            method: "POST",
            data: {
                sid: sid,
                cmd: "com.sfeg.car_carstatuschange",
               boId: boId
            },
            ok: function (ro) {
                var processInstId = ro.data.processInstId;
                var taskInstId = ro.data.taskInstId;
                //alert(processInstId+taskInstId);
                var url = "./w?sid=" + sid + "&cmd=CLIENT_BPM_FORM_MAIN_PAGE_OPEN" + "&processInstId=" + processInstId + "&taskInstId=" + taskInstId + "&openState=1";
                window.open(url, 'newInstwindow');
            },
            err: function (ro) {
	            $.simpleAlert('ro.data.msg');
            }
        });
    }
}
````


劳防用品打印，入库流程中打印事件


````
public static void appendSealList(BO sealMainData, ProcessExecutionContext ctx){
    RowMap sealBaseInfo = getBaseSealInfoByNo(sealMainData.getString("SEAL_NO"));
    String sealBaseBindId = sealBaseInfo.getString("BINDID");


    BO bo = new BO();
    bo.set("APPLY_DATE", sealMainData.get("APPLY_DATE"));
    bo.set("USER_NAME", sealMainData.get("USER_NAME"));
    bo.set("PROJECT_NO", sealMainData.get("PROJECT_NO"));
    bo.set("PROJECT_NAME", sealMainData.get("PROJECT_NAME"));
    bo.set("REASON", sealMainData.get("REASON"));
    String linkUrl = "./w?sid=@sid" + "&cmd=CLIENT_BPM_FORM_MAIN_PAGE_OPEN" + ctx.getProcessInstance().getId()
            + "&openState=2";
    bo.set("LINKURL", linkUrl);
    SDK.getBOAPI().create(Enums.SealEnum.BASE_SEAL_LIST_BONAME.getValue(), bo, sealBaseBindId, "admin");
}
````
资金计划表中的字段
项目所属组织编码
所属单位